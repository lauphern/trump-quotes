@using TrumpQuotes.Models
@using TrumpQuotes.WebSite.Services
@* @inject HttpQuoteService QuoteService *@
@using System.Net.Http
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.AspNetCore.Components.Routing
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.JSInterop
@* To make onclick events work:
https://stackoverflow.com/questions/58368714/onclick-method-not-working-in-blazor-server-side-razor-component
https://stackoverflow.com/questions/58196812/blazor-onclick-event-not-triggered *@


<p>@Quote.Value</p>
<a href="@Quote.Embedded.Source[0].Url" target="_blank">Source</a><br>
<button @onclick="GetNewQuote" data-toggle="modal" class="btn btn-primary">New quote</button>


@code {

    private static async Task<QuoteModel> DisplayQuote()
    {
        HttpQuoteService QuoteService = new HttpQuoteService();
        var quote = await QuoteService.GetQuoteAsync();
        return quote;
    }

    QuoteModel Quote = DisplayQuote().Result;
    
    private void GetNewQuote()
    {
        Quote = DisplayQuote().Result;
    }
}